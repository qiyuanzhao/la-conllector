webpackJsonp([2],{"2I9E":function(e,t,n){"use strict";var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",[n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content"},[n("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],attrs:{data:e.treeData,props:e.defaultProps,"highlight-current":"","node-key":"id","default-expand-all":"","expand-on-click-node":!1,"render-content":e.renderContent},on:{"node-click":e.nodeClick}})],1)]),e._v(" "),n("el-col",{attrs:{span:12}},[n("div",{staticClass:"grid-content"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"数据源"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.edit,expression:"scope.row.edit"}],attrs:{size:"small"},model:{value:t.row.name,callback:function(e){t.row.name=e},expression:"scope.row.name"}}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.edit,expression:"!scope.row.edit"}]},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"数据源链接"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{directives:[{name:"show",rawName:"v-show",value:t.row.edit,expression:"scope.row.edit"}],attrs:{size:"small"},model:{value:t.row.url,callback:function(e){t.row.url=e},expression:"scope.row.url"}}),e._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.edit,expression:"!scope.row.edit"}]},[e._v(e._s(t.row.url))])]}}])}),e._v(" "),n("el-table-column",{attrs:{align:"center",label:"编辑"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.row.edit,expression:"!scope.row.edit"}],attrs:{type:"primary",size:"small"},on:{click:function(n){e.editTable(t.row)}}},[e._v(e._s("编辑"))]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.edit,expression:"scope.row.edit"}],attrs:{type:"success",size:"small"},on:{click:function(n){e.saveTable(t.row)}}},[e._v(e._s("完成"))]),e._v(" "),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){e.removeSite(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("div",{staticStyle:{"margin-top":"20px"}},[n("el-button",{on:{click:function(t){e.addNewSite()}}},[e._v("新建数据源")])],1)],1)])],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("el-row",[n("div",{staticClass:"grid-content"},[n("el-form",{attrs:{model:e.sendConfig,"label-width":e.formLabelWidth2,"label-position":e.labelPosition}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"今日热点推送条数"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.sendConfig.hotSendNum,callback:function(t){e.sendConfig.hotSendNum=t},expression:"sendConfig.hotSendNum"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"今日热点可选条数"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.sendConfig.hotChooseNum,callback:function(t){e.sendConfig.hotChooseNum=t},expression:"sendConfig.hotChooseNum"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"发现热点推送条数"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.sendConfig.trendSendNum,callback:function(t){e.sendConfig.trendSendNum=t},expression:"sendConfig.trendSendNum"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"发现热点可选条数"}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.sendConfig.trendChooseNum,callback:function(t){e.sendConfig.trendChooseNum=t},expression:"sendConfig.trendChooseNum"}})],1)],1)],1),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveHotSetting()}}},[e._v("保 存")])],1)])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"修改频道",visible:e.editNodePopup,size:"tiny"},on:{"update:visible":function(t){e.editNodePopup=t}}},[n("el-form",{attrs:{model:e.node}},[n("el-form-item",{attrs:{label:"频道名称","label-width":e.formLabelWidth}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.node.name,callback:function(t){e.node.name=t},expression:"node.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"频道关键词","label-width":e.formLabelWidth}},[n("el-input",{attrs:{"auto-complete":"off"},model:{value:e.node.code,callback:function(t){e.node.code=t},expression:"node.code"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.editNodePopup=!1}}},[e._v("取 消")]),e._v(" "),e.editNode?n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveNode()}}},[e._v("确 定")]):n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveNewNode()}}},[e._v("确 定")])],1)],1)],1)},i=[],a={render:o,staticRenderFns:i};t.a=a},"607I":function(e,t,n){var o=n("zwaU");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n("rjj0")("70725aa3",o,!0)},HEYh:function(e,t,n){"use strict";function o(e){n("607I")}Object.defineProperty(t,"__esModule",{value:!0});var i=n("yupR"),a=n("2I9E"),s=n("VU/8"),r=o,l=s(i.a,a.a,r,"data-v-6f62abc0",null);t.default=l.exports},mvHQ:function(e,t,n){e.exports={default:n("qkKv"),__esModule:!0}},qkKv:function(e,t,n){var o=n("FeBl"),i=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},yupR:function(e,t,n){"use strict";var o=n("mvHQ"),i=n.n(o),a=n("mtWM"),s=n.n(a),r=n("7+uW");t.a={data:function(){return{editNodePopup:!1,editNode:!1,form:{type:"",title:"",url:""},sendConfig:{hotSendNum:"",hotChooseNum:"",trendSendNum:"",trendChooseNum:""},node:{name:"",code:""},nodeCopy:{},formLabelWidth:"100px",labelPosition:"left",formLabelWidth2:"140px",treeData:[],defaultProps:{children:"children",label:"name"},list:[],store:{},currentNode:{},treeLoading:!1,sendConfigCopy:{}}},created:function(){var e=this;this.treeLoading=!0,s.a.get("/api/category/all").then(function(t){function n(e){t.data.forEach(function(t){t.pid===e.id&&(Array.isArray(e.children)||(e.children=[]),e.children.push(t),n(t))})}var o={name:"频道",id:0};n(o),e.treeData=[o],e.treeLoading=!1}),s.a.get("/api/config/sendNum").then(function(t){e.sendConfigCopy=t.data,e.sendConfig=JSON.parse(t.data.configData)})},methods:{addNode:function(e){this.node={},this.editNodePopup=!0,this.editNode=!1,this.store=e},edit:function(e){this.editNodePopup=!0,this.editNode=!0,this.nodeCopy=e,this.node=JSON.parse(i()(this.nodeCopy))},saveNode:function(){var e=this;if(this.editNodePopup=!1,this.nodeCopy.id){this.node.id=this.nodeCopy.id;s.a.put("/api/category",this.node).then(function(t){e.nodeCopy.name=t.data.name,e.nodeCopy.code=t.data.code,e.$message({type:"success",message:"修改成功!"})})}},saveNewNode:function(){var e=this;this.node.pid=this.store.currentNode.data.id,s.a.post("/api/category",this.node).then(function(t){e.store.currentNode.data.children||(e.store.currentNode.data.children=[]),e.store.currentNode.data.children.push(t.data),e.$message({type:"success",message:"添加成功!"}),e.editNodePopup=!1})},remove:function(e,t){var n=this;this.$confirm("是否删除该频道?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o="/api/category/"+t.id;s.a.delete(o).then(function(o){e.remove(t),n.$message({type:"success",message:"删除成功!"})})})},renderContent:function(e,t){var n=this,o=t.node,i=t.data,a=t.store;return e("span",null,[e("span",null,[e("span",null,[o.label])]),e("span",{style:"float: right; margin-right: 20px"},[i.id>0?e("span",null,[e("el-button",{attrs:{size:"mini"},on:{click:function(){return n.edit(i)}}},["修改"]),e("el-button",{attrs:{size:"mini"},on:{click:function(){return n.remove(a,i)}}},["删除"])]):e("div",null,[]),e("span",{style:"margin-left: 10px"},[e("el-button",{attrs:{size:"mini"},on:{click:function(){return n.addNode(a)}}},["添加"])])])])},nodeClick:function(e,t,n){var o=this;this.currentNode=e;var i="/api/origin/list?cid="+e.id;s.a.get(i).then(function(e){o.list=e.data})},editTable:function(e){r.default.set(e,"edit",!0)},saveTable:function(e){var t=this;return e.name.length<1?void this.$message({type:"warning",message:"请输入数据源的名称！"}):e.url.length<1?void this.$message({type:"warning",message:"请输入数据源的链接！"}):(e.categoryId=this.currentNode.id,void(e.id?s.a.put("/api/origin",e).then(function(n){r.default.set(e,"edit",!1),e=n.data,t.$message({type:"success",message:"编辑成功!"})}):s.a.post("/api/origin",e).then(function(n){r.default.set(e,"edit",!1),e=n.data,t.$message({type:"success",message:"添加成功!"})})))},addNewSite:function(){this.list.push({name:"",url:"",edit:!0})},removeSite:function(e,t){var n=this;this.$confirm("是否删除该数据源?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o="/api/origin/"+t.id;s.a.delete(o).then(function(t){n.list.splice(e,1),n.$message({type:"success",message:"删除成功!"})})})},saveHotSetting:function(){var e=this;this.sendConfigCopy.configData=i()(this.sendConfig),s()({method:"put",url:"/api/config",data:this.sendConfigCopy}).then(function(t){e.$message({type:"success",message:"保存成功!"})})}}}},zwaU:function(e,t,n){t=e.exports=n("FZ+f")(!0),t.push([e.i,".el-col-12[data-v-6f62abc0]{padding:10px}","",{version:3,sources:["/Users/seveniu/project/lavector/la-collector/src/front/admin/src/views/settings/index.vue"],names:[],mappings:"AACA,4BACE,YAAc,CACf",file:"index.vue",sourcesContent:["\n.el-col-12[data-v-6f62abc0] {\n  padding: 10px;\n}\n"],sourceRoot:""}])}});
//# sourceMappingURL=2.10a3a0885e93b29dba01.js.map